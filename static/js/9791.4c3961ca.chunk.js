"use strict";(self.webpackChunksc_tbm=self.webpackChunksc_tbm||[]).push([[9791,5617,3391],{90806:(e,t,i)=>{i.d(t,{M:()=>p,b:()=>d});var n,s,r=i(57528),a=i(3799),o=i(58350),l=i(21390),c=i(64839),h=i(32307),u=i(66470);function d(e){const t=new h.N5,{vertex:i,fragment:d}=t;(0,a.NB)(i,e),i.uniforms.add(new l.m("width",(e=>e.width))),t.attributes.add(u.r.POSITION,"vec3"),t.attributes.add(u.r.NORMAL,"vec3"),t.attributes.add(u.r.UV0,"vec2"),t.attributes.add(u.r.LENGTH,"float"),t.varyings.add("vtc","vec2"),t.varyings.add("vlength","float"),t.varyings.add("vradius","float"),i.code.add((0,c.H)(n||(n=(0,r.A)(["void main(void) {\nvec3 bitangent = normal;\nvtc = uv0;\nvlength = length;\nvradius = 0.5 * width;\nvec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);\ngl_Position = proj * pos;\n}"])))),d.uniforms.add(new l.m("outlineSize",(e=>e.outlineSize)),new o.E("outlineColor",(e=>e.outlineColor)),new l.m("stripeLength",(e=>e.stripeLength)),new o.E("stripeEvenColor",(e=>e.stripeEvenColor)),new o.E("stripeOddColor",(e=>e.stripeOddColor)));const p=1/Math.sqrt(2);return d.code.add((0,c.H)(s||(s=(0,r.A)(["\n    const float INV_SQRT2 = ",";\n\n    vec4 arrowColor(vec2 tc, float len) {\n      float d = INV_SQRT2 * (tc.x - abs(tc.y));\n      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n      d = min(d, 1.0 - abs(tc.y));\n\n      if (d < 0.0) {\n        return vec4(0.0);\n      } else if (d < outlineSize) {\n        return outlineColor;\n      } else {\n        return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;\n      }\n    }\n\n    void main(void) {\n      vec2 ntc = vec2(vtc.x / vradius, vtc.y);\n      vec4 color = arrowColor(ntc, vlength / vradius);\n      if (color.a == 0.0) {\n        discard;\n      }\n      fragColor = color;\n    }\n  "])),c.H.float(p))),t}const p=Object.freeze(Object.defineProperty({__proto__:null,build:d},Symbol.toStringTag,{value:"Module"}))},24648:(e,t,i)=>{i.d(t,{Wq:()=>a,d_:()=>s,g2:()=>c,gT:()=>r,kM:()=>o,l3:()=>l});var n=i(31633);function s(e,t){return{type:(0,n.t$)(t),value:e,unit:t}}function r(e,t){return{type:(0,n.t$)(t),value:e,unit:t}}function a(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,n.t$)(t),value:e,unit:t,rotationType:i}}function o(e,t){const i=l(e,t);return"angle"===e.type?a(i,t,e.rotationType):function(e,t){return{type:(0,n.t$)(t),value:e,unit:t}}(i,t)}function l(e,t){return(0,n.oU)(e.value,e.unit,t)}function c(e,t,i){if(t===i)return e;switch(i){case"arithmetic":case"geographic":return 90-e}}s(0,"meters"),r(0,"square-meters"),a(0,"radians"),a(0,"degrees"),a(0,"degrees","geographic")},35617:(e,t,i)=>{i.r(t),i.d(t,{hydratedAdapter:()=>l});var n=i(76797),s=i(66388),r=i(13904),a=i(65215),o=i(23701);const l={convertToGEGeometry:function(e,t){if(null==t)return null;let i="cache"in t?t.cache._geVersion:void 0;return null==i&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i},exportPoint:function(e,t,i){const n=e.hasZ(t),s=e.hasM(t),a=new r.A({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return n&&(a.z=e.getPointZ(t)),s&&(a.m=e.getPointM(t)),a.cache._geVersion=t,a},exportPolygon:function(e,t,i){const n=new a.A({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return n.cache._geVersion=t,n},exportPolyline:function(e,t,i){const n=new o.A({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return n.cache._geVersion=t,n},exportMultipoint:function(e,t,i){const n=new s.A({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return n.cache._geVersion=t,n},exportExtent:function(e,t,i){const s=e.hasZ(t),r=e.hasM(t),a=new n.A({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(s){const i=e.getZExtent(t);a.zmin=i.vmin,a.zmax=i.vmax}if(r){const i=e.getMExtent(t);a.mmin=i.vmin,a.mmax=i.vmax}return a.cache._geVersion=t,a}}},63391:(e,t,i)=>{i.r(t),i.d(t,{buffer:()=>C,changeDefaultSpatialReferenceTolerance:()=>U,clearDefaultSpatialReferenceTolerance:()=>W,clip:()=>o,contains:()=>c,convexHull:()=>b,crosses:()=>h,cut:()=>l,densify:()=>N,difference:()=>M,disjoint:()=>v,distance:()=>u,equals:()=>d,extendedSpatialReferenceInfo:()=>a,flipHorizontal:()=>x,flipVertical:()=>D,generalize:()=>T,geodesicArea:()=>H,geodesicBuffer:()=>z,geodesicDensify:()=>Z,geodesicLength:()=>q,intersect:()=>P,intersectLinesToPoints:()=>B,intersects:()=>p,isSimple:()=>y,nearestCoordinate:()=>S,nearestVertex:()=>V,nearestVertices:()=>O,offset:()=>E,overlaps:()=>m,planarArea:()=>j,planarLength:()=>k,relate:()=>f,rotate:()=>G,simplify:()=>w,symmetricDifference:()=>A,touches:()=>g,union:()=>L,within:()=>_});var n=i(52612),s=i(35617);function r(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function a(e){return n.G.extendedSpatialReferenceInfo(e)}function o(e,t){return n.G.clip(s.hydratedAdapter,r(e),e,t)}function l(e,t){return n.G.cut(s.hydratedAdapter,r(e),e,t)}function c(e,t){return n.G.contains(s.hydratedAdapter,r(e),e,t)}function h(e,t){return n.G.crosses(s.hydratedAdapter,r(e),e,t)}function u(e,t,i){return n.G.distance(s.hydratedAdapter,r(e),e,t,i)}function d(e,t){return n.G.equals(s.hydratedAdapter,r(e),e,t)}function p(e,t){return n.G.intersects(s.hydratedAdapter,r(e),e,t)}function g(e,t){return n.G.touches(s.hydratedAdapter,r(e),e,t)}function _(e,t){return n.G.within(s.hydratedAdapter,r(e),e,t)}function v(e,t){return n.G.disjoint(s.hydratedAdapter,r(e),e,t)}function m(e,t){return n.G.overlaps(s.hydratedAdapter,r(e),e,t)}function f(e,t,i){return n.G.relate(s.hydratedAdapter,r(e),e,t,i)}function y(e){return n.G.isSimple(s.hydratedAdapter,r(e),e)}function w(e){return n.G.simplify(s.hydratedAdapter,r(e),e)}function b(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.G.convexHull(s.hydratedAdapter,r(e),e,t)}function M(e,t){return n.G.difference(s.hydratedAdapter,r(e),e,t)}function A(e,t){return n.G.symmetricDifference(s.hydratedAdapter,r(e),e,t)}function P(e,t){return n.G.intersect(s.hydratedAdapter,r(e),e,t)}function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.G.union(s.hydratedAdapter,r(e),e,t)}function E(e,t,i,a,o,l){return n.G.offset(s.hydratedAdapter,r(e),e,t,i,a,o,l)}function C(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.G.buffer(s.hydratedAdapter,r(e),e,t,i,a)}function z(e,t,i,a,o,l){return n.G.geodesicBuffer(s.hydratedAdapter,r(e),e,t,i,a,o,l)}function S(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n.G.nearestCoordinate(s.hydratedAdapter,r(e),e,t,i)}function V(e,t){return n.G.nearestVertex(s.hydratedAdapter,r(e),e,t)}function O(e,t,i,a){return n.G.nearestVertices(s.hydratedAdapter,r(e),e,t,i,a)}function R(e){var t,i;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e&&null!==(t=null===(i=e.extent)||void 0===i?void 0:i.center)&&void 0!==t?t:null}function G(e,t,i){var s;if(null==e)throw new I;const r=e.spatialReference;if(null==(i=null!==(s=i)&&void 0!==s?s:R(e)))throw new I;const a=e.constructor.fromJSON(n.G.rotate(e,t,i));return a.spatialReference=r,a}function x(e,t){var i;if(null==e)throw new I;const s=e.spatialReference;if(null==(t=null!==(i=t)&&void 0!==i?i:R(e)))throw new I;const r=e.constructor.fromJSON(n.G.flipHorizontal(e,t));return r.spatialReference=s,r}function D(e,t){var i;if(null==e)throw new I;const s=e.spatialReference;if(null==(t=null!==(i=t)&&void 0!==i?i:R(e)))throw new I;const r=e.constructor.fromJSON(n.G.flipVertical(e,t));return r.spatialReference=s,r}function T(e,t,i,a){return n.G.generalize(s.hydratedAdapter,r(e),e,t,i,a)}function N(e,t,i){return n.G.densify(s.hydratedAdapter,r(e),e,t,i)}function Z(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n.G.geodesicDensify(s.hydratedAdapter,r(e),e,t,i,a)}function j(e,t){return n.G.planarArea(s.hydratedAdapter,r(e),e,t)}function k(e,t){return n.G.planarLength(s.hydratedAdapter,r(e),e,t)}function H(e,t,i){return n.G.geodesicArea(s.hydratedAdapter,r(e),e,t,i)}function q(e,t,i){return n.G.geodesicLength(s.hydratedAdapter,r(e),e,t,i)}function B(e,t){return n.G.intersectLinesToPoints(s.hydratedAdapter,r(e),e,t)}function U(e,t){n.G.changeDefaultSpatialReferenceTolerance(e,t)}function W(e){n.G.clearDefaultSpatialReferenceTolerance(e)}class I extends Error{constructor(){super("Illegal Argument Exception")}}},7137:(e,t,i)=>{i.d(t,{Ow:()=>v,TT:()=>p,Xn:()=>w,Zj:()=>m,_3:()=>y,l1:()=>_,qy:()=>g,vN:()=>f});i(35238);var n=i(50076),s=i(31633),r=i(63885),a=i(80963),o=i(23701),l=i(65215),c=(i(13904),i(13312));function h(e){if(!e)return null;if((0,a.EA)(e)&&e.wkid){const t=r.uw[e.wkid];if(t)return t}const t=e.wkt2||e.wkt;if(t){const e=function(e){const t=r._f.exec(e);if(!t||2!==t.length)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const n=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(n)||isNaN(s)?null:{a:n,f:0===s?0:1/s}}(t);if(e)return e}return null}function u(e){const t=h(e);if(function(e){return null!=e&&"b"in e&&"eSq"in e&&"radius"in e}(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function d(e,t,i){const{a:n,eSq:s}=u(i),a=Math.sqrt(s),o=Math.sin(t[1]*r.eh),l=n*t[0]*r.eh;let c;return c=s>0?n*((1-s)*(o/(1-s*(o*o))-1/(2*a)*Math.log((1-a*o)/(1+a*o))))*.5:n*o,e[0]=l,e[1]=c,e}function p(e){return null!==h(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"square-meters";if(e.some((e=>!p(e.spatialReference))))throw new n.A("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let n=0;n<e.length;n++){const t=e[n],s=t.spatialReference,{radius:r,densificationRatio:a}=u(s),o=r*a;i.push(v(t,o))}const r=[],a=[0,0],o=[0,0];for(let n=0;n<i.length;n++){const{rings:e,spatialReference:l}=i[n];let c=0;for(let t=0;t<e.length;t++){const i=e[t];d(a,i[0],l),d(o,i[i.length-1],l);let n=o[0]*a[1]-a[0]*o[1];for(let e=0;e<i.length-1;e++)d(a,i[e+1],l),d(o,i[e],l),n+=o[0]*a[1]-a[0]*o[1];c+=n}c=(0,s.oU)(c,"square-meters",t),r.push(c/-2)}return r}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters";if(!e)throw new n.A("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some((e=>!p(e.spatialReference))))throw new n.A("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let n=0;n<e.length;n++){const r=e[n],{spatialReference:a}=r,o="polyline"===r.type?r.paths:r.rings;let l=0;for(let e=0;e<o.length;e++){const t=o[e];let i=0;for(let e=1;e<t.length;e++){const n=t[e-1][0],s=t[e][0],r=t[e-1][1],o=t[e][1];if(r!==o||n!==s){const e=new m;y(e,[n,r],[s,o],a),i+=e.distance}}l+=i}l=(0,s.oU)(l,"meters",t),i.push(l)}return i}function v(e,t){if("polyline"!==e.type&&"polygon"!==e.type)throw new n.A("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=e;if(!p(i))throw new n.A("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const s="polyline"===e.type?e.paths:e.rings,r=[],a=[0,0],c=new m;for(const n of s){const e=[];r.push(e),e.push([n[0][0],n[0][1]]);let s,o,l=n[0][0],h=n[0][1];for(let r=0;r<n.length-1;r++){if(s=n[r+1][0],o=n[r+1][1],l===s&&h===o)continue;const u=[l,h];y(c,[l,h],[s,o],i);const{azimuth:d,distance:p}=c,g=p/t;if(g>1){for(let n=1;n<=g-1;n++)f(a,u,d,n*t,i),e.push(a.slice(0));f(a,u,d,(p+Math.floor(g-1)*t)/2,i),e.push(a.slice(0))}f(a,u,d,p,i),e.push(a.slice(0)),l=a[0],h=a[1]}}return"polyline"===e.type?new o.A({paths:r,spatialReference:i}):new l.A({rings:r,spatialReference:i})}class m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.distance=e,this.azimuth=t,this.reverseAzimuth=i}}function f(e,t,i,n,s){const a=t[0],o=t[1],l=a*r.eh,c=o*r.eh,h=(null!==i&&void 0!==i?i:0)*r.eh,{a:d,b:p,f:g}=u(s),_=Math.sin(h),v=Math.cos(h),m=(1-g)*Math.tan(c),f=1/Math.sqrt(1+m*m),y=m*f,w=Math.atan2(m,v),b=f*_,M=b*b,A=1-M,P=A*(d*d-p*p)/(p*p),L=1+P/16384*(4096+P*(P*(320-175*P)-768)),E=P/1024*(256+P*(P*(74-47*P)-128));let C,z,S,V,O=n/(p*L),R=2*Math.PI;for(;Math.abs(O-R)>1e-12;)S=Math.cos(2*w+O),C=Math.sin(O),z=Math.cos(O),V=E*C*(S+E/4*(z*(2*S*S-1)-E/6*S*(4*C*C-3)*(4*S*S-3))),R=O,O=n/(p*L)+V;const G=y*C-f*z*v,x=Math.atan2(y*z+f*C*v,(1-g)*Math.sqrt(M+G*G)),D=Math.atan2(C*_,f*z-y*C*v),T=g/16*A*(4+g*(4-3*A)),N=x/r.eh,Z=(l+(D-(1-T)*g*b*(O+T*C*(S+T*z*(2*S*S-1)))))/r.eh;return e[0]=Z,e[1]=N,e}function y(e,t,i,n){const s=t[0]*r.eh,a=t[1]*r.eh,o=i[0]*r.eh,l=i[1]*r.eh,{a:c,b:h,f:d,radius:p}=u(n),g=o-s,_=Math.atan((1-d)*Math.tan(a)),v=Math.atan((1-d)*Math.tan(l)),m=Math.sin(_),f=Math.cos(_),y=Math.sin(v),w=Math.cos(v);let b,M,A,P,L,E,C,z,S,V,O=1e3,R=g;do{if(C=Math.sin(R),z=Math.cos(R),A=Math.sqrt(w*C*(w*C)+(f*y-m*w*z)*(f*y-m*w*z)),0===A)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;L=m*y+f*w*z,E=Math.atan2(A,L),S=f*w*C/A,M=1-S*S,P=L-2*m*y/M,isNaN(P)&&(P=0),V=d/16*M*(4+d*(4-3*M)),b=R,R=g+(1-V)*d*S*(E+V*A*(P+V*L*(2*P*P-1)))}while(Math.abs(R-b)>1e-12&&--O>0);if(0===O){const t=p,i=Math.acos(Math.sin(a)*Math.sin(l)+Math.cos(a)*Math.cos(l)*Math.cos(o-s))*t,n=o-s,c=Math.sin(n)*Math.cos(l),h=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(n),u=Math.atan2(c,h);return e.azimuth=u/r.eh,e.distance=i,e.reverseAzimuth=void 0,e}const G=M*(c*c-h*h)/(h*h),x=G/1024*(256+G*(G*(74-47*G)-128)),D=h*(1+G/16384*(4096+G*(G*(320-175*G)-768)))*(E-x*A*(P+x/4*(L*(2*P*P-1)-x/6*P*(4*A*A-3)*(4*P*P-3)))),T=Math.atan2(w*Math.sin(R),f*y-m*w*Math.cos(R)),N=Math.atan2(f*Math.sin(R),f*y*Math.cos(R)-m*w);return e.azimuth=T/r.eh,e.distance=D,e.reverseAzimuth=N/r.eh,e}function w(e){return p(e)?e:(0,a.K8)(e)?c.A.WGS84:null}},22172:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Te});var n=i(35143),s=i(91967),r=i(30726),a=i(46053),o=(i(81806),i(76460)),l=(i(47249),i(85842)),c=i(16159),h=i(2522),u=i(87562),d=i(24648),p=i(68134),g=i(20664),_=i(9392),v=i(63391),m=i(23701),f=i(9624),y=i(13312),w=i(98510),b=i(64232),M=i(86458),A=i(7137),P=i(17430),L=i(38799),E=i(90659);let C=class extends s.A{constructor(e){super(e),this._unitNormalizer=new L.E,this._tempStartPosition=(0,_.vt)(),this._tempEndPosition=(0,_.vt)(),this._tempCornerPosition=(0,_.vt)()}initialize(){const e=this.view.spatialReference,t=(0,w.lO)(e),i=t===w.GD?w.Y0:t;this._sphericalPCPF=i;const n=(0,f.canProjectWithoutEngine)(e,i);this._unitNormalizer.spatialReference=n?i:e,this.addHandles([(0,p.wB)((()=>({viewData:this.viewData,startPoint:this.analysis.startPoint})),(e=>{let{viewData:t,startPoint:i}=e;t.elevationAlignedStartPoint=this._applyProjectionAndElevationAlignment(i)}),p.pc),(0,p.wB)((()=>({viewData:this.viewData,endPoint:this.analysis.endPoint})),(e=>{let{viewData:t,endPoint:i}=e;t.elevationAlignedEndPoint=this._applyProjectionAndElevationAlignment(i)}),p.pc),(0,p.wB)((()=>({result:this._computedResult,viewData:this.viewData})),(e=>{let{result:t,viewData:i}=e;i.result=t}),p.pc)])}_applyProjectionAndElevationAlignment(e){if(null==e)return e;const{spatialReference:t,elevationProvider:i}=this.view,n=(0,P.B)(e,t,i);return null!==n&&void 0!==n?n:((0,P.V)(this.analysis,e.spatialReference,o.A.getLogger(this)),null)}get _computedResult(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,measurementMode:i}=this.viewData;if(null==e||null==t)return null;const n=this._euclideanDistances(e,t),s=this._geodesicDistance(e,t);let r,a;switch(i){case u.G.Auto:a=null!=s?"geodesic":"euclidean",r=null!==s&&void 0!==s?s:n.horizontal;break;case u.G.Geodesic:if(null==s)return null;a="geodesic",r=s;break;case u.G.Euclidean:a="euclidean",r=n.horizontal}return{mode:a,directDistance:n.direct,horizontalDistance:r,verticalDistance:n.vertical,distance:i===u.G.Euclidean||n.horizontal.value<=E.U?n.direct:null!==s&&void 0!==s?s:n.horizontal}}_euclideanDistances(e,t){const i=e.clone();i.z=t.z;const n=this._tempStartPosition,s=this._tempEndPosition,r=this._tempCornerPosition,a=this.view.spatialReference,o=this._sphericalPCPF,l=(0,f.canProjectWithoutEngine)(a,o)?o:a;(0,b.g)(e,n,l),(0,b.g)(t,s,l),(0,b.g)(i,r,l);const c=(0,g.q)(n,s),h=(0,g.q)(r,s),u=Math.abs(t.z-e.z),p=e=>this._unitNormalizer.normalizeDistance(e),_=p(c),v=p(h),m=p(u);return{direct:(0,d.d_)(_,"meters"),horizontal:(0,d.d_)(v,"meters"),vertical:(0,d.d_)(m,"meters")}}_geodesicDistance(e,t){const{spatialReference:i}=e,n=new m.A({spatialReference:i});n.addPath([e,t]);const s=i.isGeographic&&(0,A.TT)(i)?(0,A.l1)([n],"meters")[0]:i.isWebMercator?(0,v.geodesicLength)(n,"meters"):null,r=null!=s?s:this._fallbackGeodesicDistance(e,t);return null!=r?(0,d.d_)(r,"meters"):null}_fallbackGeodesicDistance(e,t){if((0,M.W)(e,z)&&(0,M.W)(t,S)){const e=new A.Zj;return(0,A._3)(e,z,S,y.A.WGS84),e.distance}return null}};(0,n._)([(0,a.MZ)()],C.prototype,"view",void 0),(0,n._)([(0,a.MZ)()],C.prototype,"analysis",void 0),(0,n._)([(0,a.MZ)()],C.prototype,"viewData",void 0),(0,n._)([(0,a.MZ)()],C.prototype,"_computedResult",null),C=(0,n._)([(0,l.$)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementController")],C);const z=(0,_.vt)(),S=(0,_.vt)();i(11265);var V=i(59784),O=i(15941),R=i(11113),G=i(76931),x=i(31633),D=i(19555),T=i(57612),N=i(11020),Z=i(7256),j=i(88321),k=i(13191),H=i(43047),q=i(55855),B=i(75762),U=i(32314),W=i(62577),I=i(45463),Q=i(48549),F=i(34981),$=i(59696),J=i(77730),X=i(66470),Y=i(16506),K=i(42693),ee=i(99415),te=i(60322),ie=i(28584),ne=i(10773),se=i(92656),re=i(90806),ae=i(93345),oe=i(57162);class le extends K.w{constructor(e,t,i){super(e,t,i)}initializeProgram(e){return new ie.B(e.rctx,le.shader.get().build(this.configuration),he)}_setPipelineState(e){const t=e===ne.y.NONE,i=this.configuration;return(0,oe.Ey)({blending:i.transparent?t?te.V0:(0,te.ez)(e):null,polygonOffset:this.configuration.polygonOffsetEnabled?{factor:0,units:-4}:null,depthTest:{func:ae.MT.LESS},depthWrite:oe.kn,colorWrite:oe.wE})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return ae.WR.TRIANGLE_STRIP}}le.shader=new Y.$(re.M,(()=>i.e(9492).then(i.bind(i,59492))));class ce extends se.E{constructor(){super(...arguments),this.polygonOffsetEnabled=!1,this.transparent=!1,this.transparencyPassType=ne.y.NONE}}(0,n._)([(0,ee.W)()],ce.prototype,"polygonOffsetEnabled",void 0),(0,n._)([(0,ee.W)()],ce.prototype,"transparent",void 0),(0,n._)([(0,ee.W)({count:ne.y.COUNT})],ce.prototype,"transparencyPassType",void 0);const he=new Map([[X.r.POSITION,0],[X.r.NORMAL,1],[X.r.UV0,2],[X.r.LENGTH,3]]);class ue extends I.im{constructor(e){super(e,new pe),this._vertexAttributeLocations=he,this.produces=new Map([[J.N.OPAQUE_MATERIAL,e=>!this._transparent&&(e===F.V.Color||e===F.V.Alpha)],[J.N.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL,e=>this._transparent&&(e===F.V.Color||e===F.V.Alpha)]]),this._configuration=new ce}getConfiguration(e,t){return this._configuration.polygonOffsetEnabled=this.parameters.polygonOffset,this._configuration.transparent=this._transparent,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration}intersect(){}createGLMaterial(e){return new de(e)}createBufferWriter(){return new we}get _transparent(){const{parameters:e}=this;return e.outlineColor[3]<1||e.stripeEvenColor[3]<1||e.stripeOddColor[3]<1}}class de extends $.A{beginSlot(e){return this.ensureTechnique(le,e)}}class pe extends I.qA{constructor(){super(...arguments),this.width=32,this.outlineSize=.2,this.outlineColor=(0,q.fA)(1,.5,0,1),this.stripeEvenColor=(0,q.fA)(1,1,1,1),this.stripeOddColor=(0,q.fA)(1,.5,0,1),this.stripeLength=1,this.polygonOffset=!1}}const ge=(0,Q.BP)().vec3f(X.r.POSITION).vec3f(X.r.NORMAL).vec2f(X.r.UV0).f32(X.r.LENGTH),_e=(0,_.vt)(),ve=(0,_.vt)(),me=(0,_.vt)(),fe=(0,_.vt)(),ye=(0,_.vt)();class we{constructor(){this.vertexBufferLayout=ge}elementCount(e){return 2*(e.attributes.get(X.r.POSITION).indices.length/2+1)}write(e,t,i,n,s){const{data:r,indices:a}=i.attributes.get(X.r.POSITION),o=i.attributes.get(X.r.NORMAL).data,l=r.length/3;a&&a.length!==2*(l-1)&&console.warn("MeasurementArrowMaterial does not support indices");const c=_e,h=ve,u=me,d=fe,p=ye,_=n.position,v=n.normal,m=n.uv0;let f=0;for(let w=0;w<l;++w){const i=3*w;if((0,g.s)(c,r[i],r[i+1],r[i+2]),w<l-1){const e=3*(w+1);(0,g.s)(h,r[e],r[e+1],r[e+2]),(0,g.s)(p,o[e],o[e+1],o[e+2]),(0,g.n)(p,p),(0,g.f)(u,h,c),(0,g.n)(u,u),(0,g.b)(d,p,u),(0,g.n)(d,d)}const n=(0,g.q)(c,h);e&&t&&((0,g.e)(c,c,e),(0,g.e)(h,h,e),(0,g.e)(d,d,t));const a=s+2*w,y=a+1;_.setVec(a,c),_.setVec(y,c),v.setVec(a,d),v.setVec(y,d),m.set(a,0,f),m.set(a,1,-1),m.set(y,0,f),m.set(y,1,1),w<l-1&&(f+=n)}const y=n.length;for(let g=0;g<2*l;++g)y.set(s+g,f)}}class be extends U.X{constructor(e){super(e),this._arrowWidth=16,this._arrowSubdivisions=128,this._origin=(0,_.vt)(),this._originTransform=(0,k.vt)(),this._arrowCenter=(0,_.vt)(),this._renderOccluded=I.m$.OccludeAndTransparent,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this._color=(0,q.vt)(),this._contrastColor=(0,q.vt)(),this.applyProperties(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial&&this._arrowMaterial.setParameters({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this._geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameters({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this._stripesEnabled?this._contrastColor:this._color;this._arrowMaterial.setParameters({stripeEvenColor:e})}}get color(){return this._color}set color(e){(0,V.we)(e,this._color)||((0,H.c)(this._color,e),this._updateArrowColor())}get contrastColor(){return this._contrastColor}set contrastColor(e){(0,V.we)(e,this._color)||((0,H.c)(this._contrastColor,e),this._updateArrowColor())}createExternalResources(){const e=this._color,t=this._contrastColor,i=this._stripesEnabled?t:e;this._arrowMaterial=new ue({outlineColor:e,stripeEvenColor:i,stripeOddColor:e,renderOccluded:this.renderOccluded,polygonOffset:!0,isDecoration:this.isDecoration}),this._handles=new j.A,this._handles.add((0,p.wB)((()=>this.view.state.camera),(()=>{this._viewChanged()})))}destroyExternalResources(){this._arrowMaterial=null,this._handles=(0,r.pR)(this._handles)}forEachExternalMaterial(e){e(this._arrowMaterial)}createGeometries(e){var t;if(null==(null===(t=this._geometry)||void 0===t?void 0:t.startRenderSpace)||null==this._geometry.endRenderSpace)return;const i=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);i.transformation=this._originTransform,e.addGeometry(i),this._viewChanged()}_createArrowGeometry(e,t,i,n){const s=this.view.renderCoordsHelper,r=[],a=[],o=(e,t)=>{const n=B.rq.get();(0,g.f)(n,e,i),r.push(n),a.push(t)};if("euclidean"===n.type){n.eval(.5,this._arrowCenter);const i=B.rq.get();s.worldUpAtPosition(this._arrowCenter,i),o(e,i),o(t,i)}else{n.eval(.5,this._arrowCenter);const e=this._arrowSubdivisions+1&-2;for(let t=0;t<e;++t){const i=t/(e-1),r=B.rq.get(),a=B.rq.get();n.eval(i,r),s.worldUpAtPosition(r,a),o(r,a)}}return(0,W.Z8)(this._arrowMaterial,r,a)}_geometryChanged(){this.recreateGeometry()}_viewChanged(){if(this.view.ready&&this.attached&&null!=this._geometry){const e=this.view.state.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameters({width:this._arrowWidth*e})}}_updateArrowColor(){if(!this.attached)return;const e=this._color,t=this._contrastColor,i=this._stripesEnabled?t:e,n=e,s=e;this._arrowMaterial.setParameters({stripeEvenColor:i,outlineColor:n,stripeOddColor:s})}}var Me=i(47996),Ae=i(25191),Pe=i(35925),Le=i(17072),Ee=i(38042),Ce=i(63860);let ze=class extends s.A{get _parameters(){const e=this.view.effectiveTheme,{accentColor:t,textColor:i}=e,n=(0,V.QP)(t),s=(0,V.f6)(t,.75),r=(0,V.QP)((0,V.bJ)(t)),a=(0,V.bJ)(i,V.pW.Low);return{accentColor:n,contrastColor:r,translucentAccentColor:s,triangleLineWidth:3,geodesicProjectionLineWidth:2,guideLineWidth:2,guideStippleLengthPixels:3,directLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12,textColor:i,textBackgroundColor:(0,V._L)(a,.6),textCalloutColor:(0,V._L)(a,.5)}}get visible(){return this.analysisView.visible}get viewMode(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView;if(null==e||null==t||e.equals(t))return T.n.None;const i=this.analysisView.result;if(null==i)return T.n.Direct;if("geodesic"===this.actualVisualizedMeasurement)return this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition)?T.n.ProjectedGeodesic:T.n.Direct;const{verticalDistance:n,horizontalDistance:s}=i,r=n.value,a=s.value;return Math.min(r/a,a/r)<this.triangleCollapseRatioThreshold?T.n.Direct:T.n.Triangle}get actualVisualizedMeasurement(){const{measurementMode:e,result:t}=this.analysisView;switch(e){case u.G.Auto:return null!=t&&t.horizontalDistance.value>E.U?"geodesic":"euclidean";case u.G.Euclidean:return"euclidean";case u.G.Geodesic:return"geodesic"}}get allowVisualElementsOrientationChange(){return null==this._triangleOrientationOverride}set allowVisualElementsOrientationChange(e){null==this._triangleOrientationOverride!==e&&(null==this._triangleOrientationOverride?this._triangleOrientationOverride=this._actualVisualElementsOrientation:this._triangleOrientationOverride=null)}get labels(){return"geodesic"===this.actualVisualizedMeasurement?{direct:null,horizontal:this._segmentLabel,vertical:this._verticalLabel}:{direct:this._segmentLabel,horizontal:this._horizontalLabel,vertical:this._verticalLabel}}constructor(e){super(e),this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=(0,_.vt)(),this._endPosition=(0,_.vt)(),this._cornerPosition=(0,_.vt)(),this._startPositionAtSeaLevel=(0,_.vt)(),this._endPositionAtSeaLevel=(0,_.vt)(),this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.visualElementOrientation=T.f.Auto,this.triangleCollapseRatioThreshold=.03}initialize(){const e=this._parameters,t={attached:!0,view:this.view,isDecoration:!0},{guideLineWidth:i,guideStippleLengthPixels:n,triangleLineWidth:s,geodesicProjectionLineWidth:r,directLabelFontSize:a,verticalLabelFontSize:o,horizontalLabelFontSize:l}=e;this._segmentVisualElement=new be({...t,geometry:null,renderOccluded:I.m$.OccludeAndTransparent}),this._triangleVisualElement=new Z.t({...t,width:s,renderOccluded:I.m$.OccludeAndTransparent}),this._rightAngleQuad=new Me.n({...t,renderOccluded:I.m$.OccludeAndTransparent});const c={...t,polygonOffset:!0,renderOccluded:I.m$.OccludeAndTransparent};this._projectedGeodesicLine=new Z.t({...c,width:r,stipplePattern:(0,Pe.wk)(n)}),this._geodesicStartHint=new Z.t({...c,width:i,stipplePattern:(0,Pe.wk)(n)}),this._geodesicEndHint=new Z.t({...c,width:i,stipplePattern:(0,Pe.wk)(n)}),this._segmentLabel=new N.N({...t,fontSize:a}),this._verticalLabel=new N.N({...t,fontSize:o}),this._horizontalLabel=new N.N({...t,fontSize:l}),this.addHandles([(0,p.wB)((()=>{const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView,i=this.view;return{view:i,camera:i.state.camera,viewMode:this.viewMode,elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,orientation:this._actualVisualElementsOrientation,visualizedMeasurement:this.actualVisualizedMeasurement,stripeLength:this._measurementArrowStripeLength}}),(e=>this._updateGeometryAndViewMode(e)),p.pc),(0,p.wB)((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateVisualElementVisibility(e)),p.pc),(0,p.wB)((()=>({text:this._labelsText,visualizedMeasurement:this.actualVisualizedMeasurement})),(e=>this._updateLabelText(e)),p.pc),(0,p.wB)((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateLabelVisibility(e)),p.pc),(0,p.wB)((()=>this._measurementArrowStripeLength),(e=>this._updateSegmentStripeLength(e)),p.pc),(0,Ee.oQ)((async()=>this._updateMessageBundle())),(0,p.wB)((()=>this._parameters),(e=>{let{textBackgroundColor:t,textCalloutColor:i,textColor:n,translucentAccentColor:s,accentColor:r,contrastColor:a}=e;const{_segmentLabel:o,_verticalLabel:l,_horizontalLabel:c,_triangleVisualElement:h,_rightAngleQuad:u,_projectedGeodesicLine:d,_geodesicStartHint:p,_geodesicEndHint:g,_segmentVisualElement:_}=this;o.backgroundColor=t,o.calloutColor=i,o.textColor=n,l.backgroundColor=t,l.calloutColor=i,l.textColor=n,c.backgroundColor=t,c.calloutColor=i,c.textColor=n,h.color=s,u.color=s,d.color=s,p.color=s,g.color=s,_.color=r,_.contrastColor=a}),p.Vh)]),this._updateMessageBundle()}destroy(){this._segmentVisualElement=(0,r.pR)(this._segmentVisualElement),this._triangleVisualElement=(0,r.pR)(this._triangleVisualElement),this._rightAngleQuad=(0,r.pR)(this._rightAngleQuad),this._projectedGeodesicLine=(0,r.pR)(this._projectedGeodesicLine),this._geodesicStartHint=(0,r.pR)(this._geodesicStartHint),this._geodesicEndHint=(0,r.pR)(this._geodesicEndHint),this._segmentLabel=(0,r.pR)(this._segmentLabel),this._verticalLabel=(0,r.pR)(this._verticalLabel),this._horizontalLabel=(0,r.pR)(this._horizontalLabel),this.set("view",null)}_updateVisualElementVisibility(e){let{visible:t,viewMode:i}=e;if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,t)switch(i){case T.n.None:break;case T.n.Direct:this._segmentVisualElement.visible=!0;break;case T.n.Triangle:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case T.n.ProjectedGeodesic:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode(e){let{view:t,camera:i,viewMode:n,elevationAlignedStartPoint:s,elevationAlignedEndPoint:r,orientation:a,visualizedMeasurement:o,stripeLength:l}=e;const c=t.renderCoordsHelper;if(null==c||null==s||null==r||s.equals(r))return;let h=this._startPosition,u=this._endPosition;c.toRenderCoords(s,h),c.toRenderCoords(r,u);const d=a===T.f.AboveSegment?1:-1,p=d*(c.getAltitude(u)-c.getAltitude(h));p<0&&(h=this._endPosition,u=this._startPosition);const g="geodesic"===o?new Ae.J(this._startPosition,this._endPosition,c.spatialReference):new Ae.C(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=g,this._updateSegmentStripeLength(l),n){case T.n.Direct:this._updateSegment(g,a);break;case T.n.Triangle:this._updateSegmentAndTriangle({view:t,camera:i,segment:g,orientation:a,startPosition:h,endPosition:u,deltaSign:d,altitudeDelta:p});break;case T.n.ProjectedGeodesic:this._updateSegmentAndProjection({view:t,orientation:a,startPosition:h,endPosition:u})}}_updateSegment(e,t){this._segmentLabel.anchor=t===T.f.AboveSegment?"top":"bottom",this._segmentLabel.geometry={type:"segment",segment:e,sampleLocation:"center"}}_updateSegmentAndTriangle(e){let{view:{renderCoordsHelper:t},camera:i,segment:n,orientation:s,startPosition:r,endPosition:a,deltaSign:o,altitudeDelta:l}=e;const c=this._cornerPosition;t.worldUpAtPosition(r,c),(0,g.h)(c,c,o*Math.abs(l)),(0,g.g)(c,c,r),this._triangleVisualElement.geometry=[[[r[0],r[1],r[2]],[c[0],c[1],c[2]],[a[0],a[1],a[2]]]],this._rightAngleQuad.geometry={previous:r,center:c,next:a};const h=new Ae.C(r,c),u=new Ae.C(c,a),d=function(e,t,i,n,s){const r=Ve,a=Oe;s.projectToRenderScreen(i,r),s.projectToRenderScreen(t,a);const o={segment:"bottom",horizontal:"top",vertical:r[0]<a[0]?"left":"right"};{const n=Re,r=Ge;if((0,Le.QO)(e,i,s,n),(0,Le.QO)(e,t,s,r),(0,D.Om)(n,r)>=Se){const e=Math.sign(n[1])===Math.sign(r[1]);o.segment=e?(0,N.R)(o.vertical):o.vertical}else{const e=xe;(0,Le.QO)(i,t,s,e),(0,D.Om)(e,r)>=Se&&(o.segment=Math.sign(e[0])===Math.sign(r[0])?(0,N.R)(o.horizontal):o.horizontal)}}if(n===T.f.BelowSegment){const e=e=>"top"===e?"bottom":"top";o.segment=e(o.segment),o.horizontal=e(o.horizontal),o.vertical=e(o.vertical)}return o}(r,a,c,s,i);this._segmentLabel.anchor=d.segment,this._segmentLabel.geometry={type:"segment",segment:n,sampleLocation:"center"},this._verticalLabel.geometry={type:"segment",segment:h,sampleLocation:"center"},this._verticalLabel.anchor=d.vertical,this._horizontalLabel.geometry={type:"segment",segment:u,sampleLocation:"center"},this._horizontalLabel.anchor=d.horizontal}_updateSegmentAndProjection(e){let{view:{renderCoordsHelper:t},orientation:i,startPosition:n,endPosition:s}=e;t.setAltitude(this._startPositionAtSeaLevel,0,n),t.setAltitude(this._endPositionAtSeaLevel,0,s);const r=new Ae.J(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,t.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(r),this._geodesicStartHint.setGeometryFromSegment(new Ae.C(this._startPositionAtSeaLevel,n)),this._geodesicEndHint.setGeometryFromSegment(new Ae.C(this._endPositionAtSeaLevel,s)),this._segmentLabel.geometry={type:"segment",segment:r,sampleLocation:"center"},this._segmentLabel.anchor=i===T.f.AboveSegment?"top":"bottom"}_updateLabelText(e){let{text:t,visualizedMeasurement:i}=e;null!=t?(this._segmentLabel.text="euclidean"===i?t.directDistance:t.horizontalDistance,this._horizontalLabel.text=t.horizontalDistance,this._verticalLabel.text=t.verticalDistance):(this._segmentLabel.text=null,this._horizontalLabel.text=null,this._verticalLabel.text=null),this.notifyChange("labels")}_updateLabelVisibility(e){let{visible:t,viewMode:i}=e;const n=this._segmentLabel,s=this._horizontalLabel,r=this._verticalLabel;if(n.visible=!1,s.visible=!1,r.visible=!1,t)switch(i){case T.n.Direct:n.visible=!0;break;case T.n.Triangle:n.visible=!0,s.visible=!0,r.visible=!0;break;case T.n.ProjectedGeodesic:n.visible=!0;case T.n.None:}}get _labelsText(){if(this.destroyed)return null;const e=this.messages,t=this.analysisView.result;if(null==t||null==e)return null;const{directDistance:i,horizontalDistance:n,verticalDistance:s}=t,r=this.analysisView.unit,a=e=>({directDistance:"",horizontalDistance:"",verticalDistance:"",...e});switch(r){case"metric":return a({directDistance:i&&(0,R.Ee)(e,i),horizontalDistance:n&&(0,R.Ee)(e,n),verticalDistance:s&&(0,R.W4)(e,s)});case"imperial":return a({directDistance:i&&(0,R.tr)(e,i),horizontalDistance:n&&(0,R.tr)(e,n),verticalDistance:s&&(0,R.t_)(e,s)});default:return a({directDistance:i&&(0,R.zJ)(e,i,r),horizontalDistance:n&&(0,R.zJ)(e,n,r),verticalDistance:s&&(0,R.zJ)(e,s,r)})}}_updateSegmentStripeLength(e){const t=this._segmentVisualElement;null!=e?(t.stripeLength=e,t.stripesEnabled=!0):t.stripesEnabled=!1}get _actualVisualElementsOrientation(){if(null!=this._triangleOrientationOverride)return this._triangleOrientationOverride;const e=this.visualElementOrientation;return e===T.f.Auto?this.view.state.camera.aboveGround?T.f.AboveSegment:T.f.BelowSegment:e}_requiresGeodesicGuideAt(e){const t=this.view;if(null===t||void 0===t||!t.state)return!1;const i=t.state.camera,n=t.renderCoordsHelper;if(!n)return!1;const s=i.computeScreenPixelSizeAt(e);return n.getAltitude(e)/s>=10}get _measurementArrowStripeLength(){const{result:e,unit:t}=this.analysisView;if(null==e)return null;let i=null;const n=e.directDistance;switch(t){case"metric":i=n&&(0,d.kM)(n,"meters");break;case"imperial":i=n&&(0,d.kM)(n,(0,x.OU)(n.value,n.unit));break;default:i=n&&(0,d.kM)(n,t)}return null==i?null:(0,O.Vr)(i.value/30)*(0,x.oU)(1,i.unit,"meters")}_updateMessageBundle(){this.loadingMessages=!0,(0,Ce.ud)("esri/core/t9n/Units").then((e=>{this.messages=e})).finally((()=>{this.loadingMessages=!1}))}get testData(){var e;return{labels:this.labels,stripeLength:null===(e=this._segmentVisualElement)||void 0===e?void 0:e.stripeLength}}};(0,n._)([(0,a.MZ)()],ze.prototype,"_parameters",null),(0,n._)([(0,a.MZ)()],ze.prototype,"_triangleOrientationOverride",void 0),(0,n._)([(0,a.MZ)()],ze.prototype,"messages",void 0),(0,n._)([(0,a.MZ)()],ze.prototype,"view",void 0),(0,n._)([(0,a.MZ)()],ze.prototype,"analysis",void 0),(0,n._)([(0,a.MZ)()],ze.prototype,"analysisView",void 0),(0,n._)([(0,a.MZ)()],ze.prototype,"loadingMessages",void 0),(0,n._)([(0,a.MZ)()],ze.prototype,"visible",null),(0,n._)([(0,a.MZ)()],ze.prototype,"viewMode",null),(0,n._)([(0,a.MZ)()],ze.prototype,"actualVisualizedMeasurement",null),(0,n._)([(0,a.MZ)()],ze.prototype,"visualElementOrientation",void 0),(0,n._)([(0,a.MZ)()],ze.prototype,"triangleCollapseRatioThreshold",void 0),(0,n._)([(0,a.MZ)()],ze.prototype,"allowVisualElementsOrientationChange",null),(0,n._)([(0,a.MZ)()],ze.prototype,"labels",null),(0,n._)([(0,a.MZ)()],ze.prototype,"_labelsText",null),(0,n._)([(0,a.MZ)()],ze.prototype,"_actualVisualElementsOrientation",null),(0,n._)([(0,a.MZ)()],ze.prototype,"_measurementArrowStripeLength",null),ze=(0,n._)([(0,l.$)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization")],ze);const Se=Math.cos((0,O.kU)(12)),Ve=(0,G.r_)(),Oe=(0,G.r_)(),Re=(0,G.QG)(),Ge=(0,G.QG)(),xe=(0,G.QG)();let De=class extends((0,h.P)(s.A)){constructor(e){super(e),this.type="direct-line-measurement-view-3d",this.analysis=null,this.result=null,this.measurementMode=u.G.Auto,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null}initialize(){const e=this.view,t=this.analysis;this._analysisVisualization=new ze({view:e,analysis:t,analysisView:this}),this._analysisController=new C({view:e,analysis:t,viewData:this})}destroy(){this._analysisController=(0,r.pR)(this._analysisController),this._analysisVisualization=(0,r.pR)(this._analysisVisualization)}get updating(){var e;return!(null===(e=this._analysisVisualization)||void 0===e||!e.loadingMessages)}get viewMode(){return this._analysisVisualization.viewMode}get actualVisualizedMeasurement(){return this._analysisVisualization.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisVisualization.visualElementOrientation}set visualElementOrientation(e){this._analysisVisualization.visualElementOrientation=e}get allowVisualElementsOrientationChange(){return this._analysisVisualization.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(e){this._analysisVisualization.allowVisualElementsOrientationChange=e}get triangleCollapseRatioThreshold(){return this._analysisVisualization.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(e){this._analysisVisualization.triangleCollapseRatioThreshold=e}get directLabelText(){var e,t;return null!==(e=null===(t=this._analysisVisualization.labels.direct)||void 0===t?void 0:t.text)&&void 0!==e?e:""}get horizontalLabelText(){var e,t;return null!==(e=null===(t=this._analysisVisualization.labels.horizontal)||void 0===t?void 0:t.text)&&void 0!==e?e:""}get verticalLabelText(){var e,t;return null!==(e=null===(t=this._analysisVisualization.labels.vertical)||void 0===t?void 0:t.text)&&void 0!==e?e:""}get unit(){var e;return null!==(e=this.analysis.unit)&&void 0!==e?e:this._defaultUnit}get testData(){var e;return this.destroyed?{labels:null,stripeLength:null,visualization:null,controller:null}:{...null===(e=this._analysisVisualization)||void 0===e?void 0:e.testData,visualization:this._analysisVisualization,controller:this._analysisController}}};(0,n._)([(0,a.MZ)()],De.prototype,"updating",null),(0,n._)([(0,a.MZ)({readOnly:!0})],De.prototype,"type",void 0),(0,n._)([(0,a.MZ)({constructOnly:!0,nonNullable:!0})],De.prototype,"analysis",void 0),(0,n._)([(0,a.MZ)()],De.prototype,"result",void 0),(0,n._)([(0,a.MZ)()],De.prototype,"measurementMode",void 0),(0,n._)([(0,a.MZ)()],De.prototype,"elevationAlignedStartPoint",void 0),(0,n._)([(0,a.MZ)()],De.prototype,"elevationAlignedEndPoint",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],De.prototype,"viewMode",null),(0,n._)([(0,a.MZ)({readOnly:!0})],De.prototype,"actualVisualizedMeasurement",null),(0,n._)([(0,a.MZ)()],De.prototype,"visualElementOrientation",null),(0,n._)([(0,a.MZ)()],De.prototype,"allowVisualElementsOrientationChange",null),(0,n._)([(0,a.MZ)()],De.prototype,"triangleCollapseRatioThreshold",null),(0,n._)([(0,a.MZ)({readOnly:!0})],De.prototype,"directLabelText",null),(0,n._)([(0,a.MZ)({readOnly:!0})],De.prototype,"horizontalLabelText",null),(0,n._)([(0,a.MZ)({readOnly:!0})],De.prototype,"verticalLabelText",null),(0,n._)([(0,a.MZ)()],De.prototype,"_analysisVisualization",void 0),(0,n._)([(0,a.MZ)()],De.prototype,"_analysisController",void 0),(0,n._)([(0,a.MZ)()],De.prototype,"unit",null),(0,n._)([(0,a.MZ)(c.q)],De.prototype,"_defaultUnit",void 0),De=(0,n._)([(0,l.$)("esri.views.3d.analysis.DirectLineMeasurementAnalysisView3D")],De);const Te=De},57612:(e,t,i)=>{var n,s;i.d(t,{f:()=>s,n:()=>n}),function(e){e[e.None=0]="None",e[e.Direct=1]="Direct",e[e.Triangle=2]="Triangle",e[e.ProjectedGeodesic=3]="ProjectedGeodesic"}(n||(n={})),function(e){e[e.Auto=0]="Auto",e[e.AboveSegment=1]="AboveSegment",e[e.BelowSegment=2]="BelowSegment"}(s||(s={}))},87562:(e,t,i)=>{var n;i.d(t,{G:()=>n}),function(e){e[e.Auto=0]="Auto",e[e.Euclidean=1]="Euclidean",e[e.Geodesic=2]="Geodesic"}(n||(n={}))},38799:(e,t,i)=>{i.d(t,{E:()=>s});var n=i(31633);class s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.spatialReference=e}get spatialReference(){return this._spatialReference}set spatialReference(e){e!==this._spatialReference&&(this._spatialReference=e,this._updateNormalizationFactors())}normalizeDistance(e){return e*this._metersPerDistanceUnit}normalizeElevation(e){return e*this._metersPerElevationUnit}normalizeArea(e){return e*this._squareMetersPerAreaUnit}_updateNormalizationFactors(){this._metersPerDistanceUnit=(0,n.GA)(this._spatialReference,1),this._metersPerElevationUnit=(0,n.GA)(this._spatialReference,1),this._squareMetersPerAreaUnit=this._metersPerDistanceUnit*this._metersPerDistanceUnit}}},32314:(e,t,i)=>{i.d(t,{X:()=>c});var n=i(34761),s=i(13191),r=i(69230),a=i(37046),o=i(44513),l=i(8918);class c extends r.B{constructor(e){super(e),this._resources=null,this._transform=(0,s.vt)()}get object(){return null!=this._resources?this._resources.object:null}get transform(){return this._transform}set transform(e){(0,n.C)(this._transform,e),null!=this._resources&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(null==this._resources)return;const e=this._resources.object,t=this.view._stage;t.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),e.visible=this.visible,t.addMany(e.geometries)}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const t=new l.x(e,{pickable:!1,updatePolicy:o.q.SYNC}),i=new a.B({castShadow:!1});i.transformation=this._transform,this.createExternalResources(),this.createGeometries(i),e.addMany(i.geometries),this.forEachExternalMaterial((t=>e.add(t))),e.add(i),t.add(i),i.visible=this.visible,this._resources={layer:t,object:i}}destroyResources(){const e=this.view._stage;null!=this._resources&&e&&(e.remove(this._resources.object),this._resources.layer.destroy(),this.forEachExternalMaterial((t=>{e.remove(t)})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){null!=this._resources&&(this._resources.object.visible=e)}}},69230:(e,t,i)=>{i.d(t,{B:()=>s});var n=i(68134);class s{get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e}constructor(e){this._isDecoration=!1,this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=e.view,this._handle=(0,n.wB)((()=>e.view.ready),(e=>{this._resourcesCreated&&(e?this._createResources():this._destroyResources())}))}applyProperties(e){let t=!1;for(const i in e)i in this?"attached"===i?t=e[i]:this[i]=e[i]:console.error("Cannot set unknown property",i);this.attached=t}destroy(){this.attached=!1,this._handle.remove()}get attached(){return this._attached}set attached(e){e!==this._attached&&this.view._stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources(),this.onAttachedChange(e))}onAttachedChange(e){}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.updateVisibility(this.visible)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}}}]);
//# sourceMappingURL=9791.4c3961ca.chunk.js.map