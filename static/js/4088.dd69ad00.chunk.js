"use strict";(self.webpackChunksc_tbm=self.webpackChunksc_tbm||[]).push([[4088],{74088:(l,e,t)=>{t.d(e,{previewSymbol2D:()=>S});var i=t(69539),n=t(59784),o=t(50076),a=t(85504),s=t(76931),u=t(87840),d=t(65709),h=t(26291),c=t(27790);const r="picture-fill",v="picture-marker",m="simple-fill",p="simple-line",f="simple-marker",y="text",g="Aa",w=d.CB.size,b=d.CB.maxSize,z=d.CB.maxOutlineSize,L=d.CB.lineWidth,k=225,x=document.createElement("canvas");function M(l,e){const t=x.getContext("2d"),i=[];e&&(e.weight&&i.push(e.weight),e.size&&i.push(e.size+"px"),e.family&&i.push(e.family)),t.font=i.join(" ");const{width:n,actualBoundingBoxLeft:o,actualBoundingBoxRight:a,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u}=t.measureText(l);return{width:Math.ceil(Math.max(n,o+a)),height:Math.ceil(s+u),x:Math.floor(o),y:Math.floor((s-u)/2)}}function C(l){const e=null===l||void 0===l?void 0:l.size;return{width:null!=e&&"object"==typeof e&&"width"in e?(0,s.Lz)(e.width):null,height:null!=e&&"object"==typeof e&&"height"in e?(0,s.Lz)(e.height):null}}function B(l,e){return l>e?"dark":"light"}async function S(l,e){var t;const{shapeDescriptor:i,size:n,renderOptions:k}=function(l,e){var t,i,n;const o="number"==typeof(null===e||void 0===e?void 0:e.size)?null===e||void 0===e?void 0:e.size:null,a=null!=o?(0,s.Lz)(o):null,h=null!=(null===e||void 0===e?void 0:e.maxSize)?(0,s.Lz)(e.maxSize):null;let c="angle"in l?l.angle:null;null!=(null===e||void 0===e?void 0:e.rotation)&&(c=(null!==(t=c)&&void 0!==t?t:0)+e.rotation);const k=(0,u.eH)(l);let x=(0,u.$4)(l);"dark"!==A(l,245)||(null===e||void 0===e?void 0:e.ignoreWhiteSymbols)||(x={width:.75,...x,color:"#bdc3c7"});const B={shape:null,fill:k,stroke:x,offset:[0,0]};(null===(i=x)||void 0===i?void 0:i.width)&&(x.width=Math.min(x.width,z));const S=(null===(n=x)||void 0===n?void 0:n.width)||0;let j=null!=(null===e||void 0===e?void 0:e.size)&&(null==(null===e||void 0===e?void 0:e.scale)||(null===e||void 0===e?void 0:e.scale)),D=0,E=0,F=!1;switch(l.type){case f:{const t=l.style,{width:i,height:n}=C(e),o=i===n&&null!=i?i:null!=a?a:Math.min((0,s.Lz)(l.size),h||b);switch(D=o,E=o,t){case"circle":B.shape={type:"circle",cx:0,cy:0,r:.5*o},j||(D+=S,E+=S);break;case"cross":B.shape={type:"path",path:[{command:"M",values:[0,.5*E]},{command:"L",values:[D,.5*E]},{command:"M",values:[.5*D,0]},{command:"L",values:[.5*D,E]}]};break;case"diamond":B.shape={type:"path",path:[{command:"M",values:[0,.5*E]},{command:"L",values:[.5*D,0]},{command:"L",values:[D,.5*E]},{command:"L",values:[.5*D,E]},{command:"Z",values:[]}]},j||(D+=S,E+=S);break;case"square":B.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,E]},{command:"L",values:[0,E]},{command:"Z",values:[]}]},j||(D+=S,E+=S),c&&(F=!0);break;case"triangle":B.shape={type:"path",path:[{command:"M",values:[.5*D,0]},{command:"L",values:[D,E]},{command:"L",values:[0,E]},{command:"Z",values:[]}]},j||(D+=S,E+=S),c&&(F=!0);break;case"x":B.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,E]},{command:"M",values:[D,0]},{command:"L",values:[0,E]}]},c&&(F=!0);break;case"path":B.shape={type:"path",path:l.path||""},j||(D+=S,E+=S),c&&(F=!0),j=!0}break}case p:{var O;const{width:l,height:t}=C(e),i=(0,u.O0)(x).reduce(((l,e)=>l+e),0),n=i&&Math.ceil(L/i),o=null!==(O=null!==t&&void 0!==t?t:a)&&void 0!==O?O:S,s=null!==l&&void 0!==l?l:i*n||L;x&&(x.width=o),D=s,E=o,j=!0,B.shape={type:"path",path:[{command:"M",values:[o/2,E/2]},{command:"L",values:[D-o/2,E/2]}]};break}case r:case m:{var W;const l="object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&!(null===e||void 0===e||null===(W=e.symbolConfig)||void 0===W||!W.isSquareFill),{width:t,height:i}=C(e);D=!l&&t!==i||null==t?null!=a?a:w:t,E=!l&&t!==i||null==i?D:i,j||(D+=S,E+=S),j=!0,B.shape=l?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,E]},{command:"L",values:[0,E]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:d.nq.fill[0];break}case v:{const t=Math.min((0,s.Lz)(l.width),h||b),i=Math.min((0,s.Lz)(l.height),h||b),{width:n,height:o}=C(e),u=n===o&&null!=n?n:null!=a?a:Math.max(t,i),d=t/i;D=d<=1?Math.ceil(u*d):u,E=d<=1?u:Math.ceil(u/d),B.shape={type:"image",x:-Math.round(D/2),y:-Math.round(E/2),width:D,height:E,src:l.url||""},c&&(F=!0);break}case y:{const t=l,i=(null===e||void 0===e?void 0:e.overrideText)||t.text||g,n=t.font,{width:o,height:u}=C(e),d=null!=u?u:null!=a?a:Math.min((0,s.Lz)(n.size),h||b),{width:c,height:r}=M(i,{weight:n.weight,size:d,family:n.family}),v=/[\uE600-\uE6FF]/.test(i);D=null!==o&&void 0!==o?o:v?d:c,E=v?d:r;let m=.5*(v?d:r);v&&(m+=5),B.shape={type:"text",text:i,x:t.xoffset||0,y:t.yoffset||m,align:"middle",alignBaseline:t.verticalAlignment,decoration:n&&n.decoration,rotated:t.rotated,kerning:t.kerning},B.font=n&&{size:d,style:n.style,decoration:n.decoration,weight:n.weight,family:n.family};break}}return{shapeDescriptor:B,size:[D,E],renderOptions:{node:null===e||void 0===e?void 0:e.node,scale:j,opacity:null===e||void 0===e?void 0:e.opacity,rotations:[c],useRotationSize:F,effectView:null===e||void 0===e?void 0:e.effectView,ariaLabel:null===e||void 0===e?void 0:e.ariaLabel}}}(l,e);if(!i.shape)throw new o.A("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(l,e){const t=e.fill,i=l.color;if("pattern"===(null===t||void 0===t?void 0:t.type)&&i&&l.type!==r){const l=await(0,u.rc)(t.src,i.toCss(!0));t.src=l,e.fill=t}}(l,i),await async function(l,e,t,i){if(!("font"in l)||!l.font||"text"!==e.shape.type)return;try{await(0,a.Al)(l.font)}catch{}const{width:n,height:o}=C(i);if(!/[\uE600-\uE6FF]/.test(e.shape.text)){var s,u,d,h;const{width:a,height:c,x:r,y:v}=M(e.shape.text,{weight:null===(s=e.font)||void 0===s?void 0:s.weight,size:null===(u=e.font)||void 0===u?void 0:u.size,family:null===(d=e.font)||void 0===d?void 0:d.family});t[0]=null!==n&&void 0!==n?n:a,t[1]=null!==o&&void 0!==o?o:c,e.shape.x=r,e.shape.y=v;let m="angle"in l?l.angle:null;if(null!=(null===i||void 0===i?void 0:i.rotation)&&(m=(null!==(h=m)&&void 0!==h?h:0)+i.rotation),m){const l=m*(Math.PI/180),e=Math.abs(Math.sin(l)),i=Math.abs(Math.cos(l));t[1]=t[0]*e+t[1]*i}}}(l,i,n,e);const x=[[i]];if("object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&null!==e&&void 0!==e&&null!==(t=e.symbolConfig)&&void 0!==t&&t.applyColorModulation){const l=.6*n[0];x.unshift([{...i,offset:[-l,0],fill:(0,d.QC)(i.fill,-.3)}]),x.push([{...i,offset:[l,0],fill:(0,d.QC)(i.fill,.3)}]),n[0]+=2*l,k.scale=!1}return"text"===l.type&&function(l,e,t,i,n){var o;if(null!=l.haloColor&&null!=l.haloSize){var a;null!==(a=n.masking)&&void 0!==a||(n.masking=t.map((()=>[])));const o=(0,s.Lz)(l.haloSize);i[0]+=o,i[1]+=o,t.unshift([{...e,fill:null,stroke:{color:l.haloColor,width:2*o,join:"round",cap:"round"}}]),n.masking.unshift([{shape:{type:"rect",x:0,y:0,width:i[0]+2*c.y7,height:i[1]+2*c.y7},fill:[255,255,255],stroke:null},{...e,fill:[0,0,0,0],stroke:null}])}null==l.backgroundColor&&null==l.borderLineColor||(i[0]+=2*c.y7,i[1]+=2*c.y7,t.unshift([{shape:{type:"rect",x:0,y:0,width:i[0],height:i[1]},fill:l.backgroundColor,stroke:{color:l.borderLineColor,width:(0,s.Lz)(l.borderLineSize)}}]),null===(o=n.masking)||void 0===o||o.unshift([]))}(l,i,x,n,k),(0,h.fz)(x,n,k)}function A(l){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;const t=(0,u.eH)(l),o=(0,u.$4)(l),a=!t||"type"in t?null:new i.A(t),s=null!==o&&void 0!==o&&o.color?new i.A(null===o||void 0===o?void 0:o.color):null,d=a?B((0,n.Ws)(a),e):null,h=s?B((0,n.Ws)(s),e):null;return h?d?d===h?d:e>=k?"light":"dark":h:d}}}]);
//# sourceMappingURL=4088.dd69ad00.chunk.js.map