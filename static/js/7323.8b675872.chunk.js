"use strict";(self.webpackChunksc_tbm=self.webpackChunksc_tbm||[]).push([[7323,7040],{52007:(e,t,r)=>{r.d(t,{a:()=>s,f:()=>i,n:()=>o});var n=r(78393);function o(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;const s=t.length/2;let i=0,l=0;if((0,n.cy)(t)||(0,n.dk)(t)){for(let n=0;n<s;++n)e[i]=t[l],e[i+1]=t[l+1],i+=r,l+=o;return}const u=(0,n.a3)(t);if((0,n.JI)(t))for(let n=0;n<s;++n)e[i]=Math.max(t[l]/u,-1),e[i+1]=Math.max(t[l+1]/u,-1),i+=r,l+=o;else for(let n=0;n<s;++n)e[i]=t[l]/u,e[i+1]=t[l+1]/u,i+=r,l+=o}function i(e,t,r,n){var o,s;const i=e.typedBuffer,l=e.typedBufferStride,u=null!==(o=null===n||void 0===n?void 0:n.count)&&void 0!==o?o:e.count;let a=(null!==(s=null===n||void 0===n?void 0:n.dstIndex)&&void 0!==s?s:0)*l;for(let c=0;c<u;++c)i[a]=t,i[a+1]=r,a+=l}Object.freeze(Object.defineProperty({__proto__:null,fill:i,normalizeIntegerBuffer:s,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},2e3:(e,t,r)=>{function n(e,t){o(e.typedBuffer,t,e.typedBufferStride)}function o(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;const n=t.typedBuffer,o=t.typedBufferStride,s=t.count;let i=0,l=0;for(let u=0;u<s;++u)e[i]=n[l],e[i+1]=n[l+1],e[i+2]=n[l+2],e[i+3]=n[l+3],i+=r,l+=o}function s(e,t,r,n,o,s){var i,l;const u=e.typedBuffer,a=e.typedBufferStride,c=null!==(i=null===s||void 0===s?void 0:s.count)&&void 0!==i?i:e.count;let d=(null!==(l=null===s||void 0===s?void 0:s.dstIndex)&&void 0!==l?l:0)*a;for(let f=0;f<c;++f)u[d]=t,u[d+1]=r,u[d+2]=n,u[d+3]=o,d+=a}r.d(t,{a:()=>o,c:()=>n,f:()=>s});Object.freeze(Object.defineProperty({__proto__:null,copy:o,copyView:n,fill:s},Symbol.toStringTag,{value:"Module"}))},93795:(e,t,r)=>{function n(e){return e=e||globalThis.location.hostname,a.some((t=>{var r;return null!=(null===(r=e)||void 0===r?void 0:r.match(t))}))}function o(e,t){return e?(t=t||globalThis.location.hostname)?null!=t.match(s)||null!=t.match(l)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(i)||null!=t.match(u)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e:null}r.d(t,{EM:()=>o,b5:()=>n});const s=/^devext\.arcgis\.com$/,i=/^qaext\.arcgis\.com$/,l=/^[\w-]*\.mapsdevext\.arcgis\.com$/,u=/^[\w-]*\.mapsqa\.arcgis\.com$/,a=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,s,i,/^jsapps\.esri\.com$/,l,u]},54439:(e,t,r)=>{r.d(t,{G:()=>i});var n=r(44680),o=r(59422),s=r(86300);function i(e){if(null==e)return null;const t=null!=e.offset?e.offset:o.uY,r=null!=e.rotation?e.rotation:0,i=null!=e.scale?e.scale:o.Un,l=(0,n.fA)(1,0,0,0,1,0,t[0],t[1],1),u=(0,n.fA)(Math.cos(r),-Math.sin(r),0,Math.sin(r),Math.cos(r),0,0,0,1),a=(0,n.fA)(i[0],0,0,0,i[1],0,0,0,1),c=(0,n.vt)();return(0,s.lw)(c,u,a),(0,s.lw)(c,l,c),c}},420:(e,t,r)=>{r.d(t,{x:()=>i});var n=r(78393),o=r(38496),s=r(93345);function i(e,t){switch(t){case s.WR.TRIANGLES:return"number"==typeof(r=e)?(0,o.tM)(r):(0,n.mg)(r)?new Uint16Array(r):r;case s.WR.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const r=t-2,n=(0,o.my)(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;t+=1)t%2==0?(n[e++]=t,n[e++]=t+1,n[e++]=t+2):(n[e++]=t+1,n[e++]=t,n[e++]=t+2)}else{let t=0;for(let o=0;o<r;o+=1)o%2==0?(n[t++]=e[o],n[t++]=e[o+1],n[t++]=e[o+2]):(n[t++]=e[o+1],n[t++]=e[o],n[t++]=e[o+2])}return n}(e);case s.WR.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;++t)n[e++]=0,n[e++]=t+1,n[e++]=t+2;return n}const o=e[0];let s=e[1],i=0;for(let l=0;l<r;++l){const t=e[l+2];n[i++]=o,n[i++]=s,n[i++]=t,s=t}return n}(e)}var r}},37040:(e,t,r)=>{r.d(t,{KB:()=>l,Xi:()=>s,pn:()=>u,x3:()=>i});var n=r(81806),o=r(83490);class s{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.JS.KTX2_ENCODING}}function i(e){return"encoded-mesh-texture"===(null===e||void 0===e?void 0:e.type)}async function l(e){const t=new Blob([e]),r=await t.text();return JSON.parse(r)}async function u(e,t){if(t===o.JS.KTX2_ENCODING)return new s(e);const r=new Blob([e],{type:t}),i=URL.createObjectURL(r),l=new Image;if((0,n.A)("esri-iPhone"))return new Promise(((e,t)=>{const r=()=>{o(),e(l)},n=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(i),l.removeEventListener("load",r),l.removeEventListener("error",n)};l.addEventListener("load",r),l.addEventListener("error",n),l.src=i}));try{l.src=i,await l.decode()}catch(u){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(i),l}},7323:(e,t,r)=>{r.d(t,{fetch:()=>_});var n=r(93795),o=r(15941),s=r(86300),i=r(44680),l=r(34761),u=r(13191),a=r(72745),c=r(20664),d=r(9392),f=r(42294),m=r(75002),h=r(88105),p=r(45136),x=r(10947),g=r(52007),v=r(64591),y=r(2e3),b=r(11109),T=r(420),w=r(37040),B=r(54439);class R{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class S{constructor(e,t,r){this.name=e,this.lodThreshold=t,this.pivotOffset=r,this.stageResources=new R,this.numberOfVertices=0}}var M=r(14766),E=r(59046),A=r(50468),I=r(83490),O=r(17345),L=r(96897),F=r(66470),N=r(61895),C=r(50791),U=r(78992);async function _(e,t){var i;const R=function(e){const t=e.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return t?{fileType:"gltf",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null}:e.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:e,specifiedLodIndex:null}:{fileType:"unknown",url:e,specifiedLodIndex:null}}((0,n.EM)(e));if("wosr"===R.fileType){const e=await(t.cache?t.cache.loadWOSR(R.url,t):(0,M.Hh)(R.url,t)),{engineResources:r,referenceBoundingBox:n}=(0,M.FJ)(e,t);return{lods:r,referenceBoundingBox:n,isEsriSymbolResource:!1,isWosr:!0}}let _;if(t.cache)_=await t.cache.loadGLTF(R.url,t,!!t.usePBR);else{const{loadGLTF:e}=await r.e(6516).then(r.bind(r,56516));_=await e(new b.R(t.streamDataRequester),R.url,t,t.usePBR)}const G=null===(i=_.model.meta)||void 0===i?void 0:i.ESRI_proxyEllipsoid,k=_.meta.isEsriSymbolResource&&null!=G&&"EsriRealisticTreesStyle"===_.meta.ESRI_webstyle;k&&!_.customMeta.esriTreeRendering&&(_.customMeta.esriTreeRendering=!0,function(e,t){for(let r=0;r<e.model.lods.length;++r){const n=e.model.lods[r];for(const o of n.parts){const n=o.attributes.normal;if(null==n)return;const s=o.attributes.position,i=s.count,a=(0,d.vt)(),f=(0,d.vt)(),m=(0,d.vt)(),p=new Uint8Array(4*i),x=new Float64Array(3*i),g=(0,l.B8)((0,u.vt)(),o.transform);let v=0,y=0;for(let l=0;l<i;l++){s.getVec(l,f),n.getVec(l,a),(0,c.t)(f,f,o.transform),(0,c.d)(m,f,t.center),(0,c.E)(m,m,t.radius);const i=m[2],u=(0,c.l)(m),d=Math.min(.45+.55*u*u,1);(0,c.E)(m,m,t.radius),null!==g&&(0,c.t)(m,m,g),(0,c.n)(m,m),r+1!==e.model.lods.length&&e.model.lods.length>1&&(0,c.m)(m,m,a,i>-1?.2:Math.min(-4*i-3.8,1)),x[v]=m[0],x[v+1]=m[1],x[v+2]=m[2],v+=3,p[y]=255*d,p[y+1]=255*d,p[y+2]=255*d,p[y+3]=255,y+=4}o.attributes.normal=new h.xs(x),o.attributes.color=new h.XP(p)}}}(_,G));const $=!!t.usePBR,j=_.meta.isEsriSymbolResource?{usePBR:$,isSchematic:!1,treeRendering:k,mrrFactors:U.SY}:{usePBR:$,isSchematic:!1,treeRendering:!1,mrrFactors:U.mb},V={...t.materialParameters,treeRendering:k},{engineResources:q,referenceBoundingBox:z}=function(e,t,r,n,i){const l=e.model,u=new Array,c=new Map,d=new Map,b=l.lods.length,R=(0,f.Ie)();return l.lods.forEach(((e,M)=>{const _=!0===n.skipHighLods&&(b>1&&0===M||b>3&&1===M)||!1===n.skipHighLods&&null!=i&&M!==i;if(_&&0!==M)return;const G=new S(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const i=_?new N.$U({},n):function(e,t,r,n,o,s,i,l){const u=t.material+(t.attributes.normal?"_normal":"")+(t.attributes.color?"_color":"")+(t.attributes.texCoord0?"_texCoord0":"")+(t.attributes.tangent?"_tangent":""),c=e.materials.get(t.material),d=null!=t.attributes.texCoord0,f=null!=t.attributes.normal;if(null==c)return null;const m=function(e){switch(e){case"BLEND":return I.sf.Blend;case"MASK":return I.sf.Mask;case"OPAQUE":case null:case void 0:return I.sf.Opaque}}(c.alphaMode);if(!s.has(u)){var h,p;if(d){const t=function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=t&&!i.has(t)){const n=e.textures.get(t);if(null!=n){const e=n.data;i.set(t,new L.g((0,w.x3)(e)?e.data:e,{...n.parameters,preMultiplyAlpha:!(0,w.x3)(e)&&r,encoding:(0,w.x3)(e)&&null!=e.encoding?e.encoding:void 0}))}}};t(c.textureColor,m!==I.sf.Opaque),t(c.textureNormal),t(c.textureOcclusion),t(c.textureEmissive),t(c.textureMetallicRoughness)}const r=c.color[0]**(1/C.T),x=c.color[1]**(1/C.T),g=c.color[2]**(1/C.T),v=c.emissiveFactor[0]**(1/C.T),y=c.emissiveFactor[1]**(1/C.T),b=c.emissiveFactor[2]**(1/C.T),T=null!=c.textureColor&&d?i.get(c.textureColor):null,R=(0,U.Jr)({normalTexture:c.textureNormal,metallicRoughnessTexture:c.textureMetallicRoughness,metallicFactor:c.metallicFactor,roughnessFactor:c.roughnessFactor,emissiveTexture:c.textureEmissive,emissiveFactor:c.emissiveFactor,occlusionTexture:c.textureOcclusion}),S=null!=(null===(h=c.normalTextureTransform)||void 0===h?void 0:h.scale)?null===(p=c.normalTextureTransform)||void 0===p?void 0:p.scale:a.Un;s.set(u,new N.$U({...n,transparent:m===I.sf.Blend,customDepthTest:I.it.Lequal,textureAlphaMode:m,textureAlphaCutoff:c.alphaCutoff,diffuse:[r,x,g],ambient:[r,x,g],opacity:c.opacity,doubleSided:c.doubleSided,doubleSidedType:"winding-order",cullFace:c.doubleSided?I.s2.None:I.s2.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:f?E.W.Attribute:E.W.ScreenDerivative,castShadows:!0,receiveShadows:c.receiveShadows,receiveAmbientOcclusion:c.receiveAmbientOcclustion,textureId:null!=T?T.id:void 0,colorMixMode:c.colorMixMode,normalTextureId:null!=c.textureNormal&&d?i.get(c.textureNormal).id:void 0,textureAlphaPremultiplied:null!=T&&!!T.parameters.preMultiplyAlpha,occlusionTextureId:null!=c.textureOcclusion&&d?i.get(c.textureOcclusion).id:void 0,emissiveTextureId:null!=c.textureEmissive&&d?i.get(c.textureEmissive).id:void 0,metallicRoughnessTextureId:null!=c.textureMetallicRoughness&&d?i.get(c.textureMetallicRoughness).id:void 0,emissiveFactor:[v,y,b],mrrFactors:R?U.Bt:[c.metallicFactor,c.roughnessFactor,n.mrrFactors[2]],isSchematic:R,colorTextureTransformMatrix:(0,B.G)(c.colorTextureTransform),normalTextureTransformMatrix:(0,B.G)(c.normalTextureTransform),scale:[S[0],S[1]],occlusionTextureTransformMatrix:(0,B.G)(c.occlusionTextureTransform),emissiveTextureTransformMatrix:(0,B.G)(c.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:(0,B.G)(c.metallicRoughnessTextureTransform),...o},l))}const x=s.get(u);if(r.stageResources.materials.push(x),d){const e=e=>{null!=e&&r.stageResources.textures.push(i.get(e))};e(c.textureColor),e(c.textureNormal),e(c.textureOcclusion),e(c.textureEmissive),e(c.textureMetallicRoughness)}return x}(l,e,G,t,r,c,d,n),{geometry:u,vertexCount:b}=function(e,t){const r=e.attributes.position.count,n=(0,T.x)(e.indices||r,e.primitiveType),i=(0,m.oe)(3*r),{typedBuffer:l,typedBufferStride:u}=e.attributes.position;(0,p.t)(i,l,e.transform,3,u);const a=[[F.r.POSITION,new A.n(i,n,3,!0)]];if(null!=e.attributes.normal){const t=(0,m.oe)(3*r),{typedBuffer:i,typedBufferStride:l}=e.attributes.normal;(0,s.Ge)(P,e.transform),(0,p.b)(t,i,P,3,l),(0,o.or)(P)&&(0,p.n)(t,t),a.push([F.r.NORMAL,new A.n(t,n,3,!0)])}if(null!=e.attributes.tangent){const t=(0,m.oe)(4*r),{typedBuffer:i,typedBufferStride:l}=e.attributes.tangent;(0,s.z0)(P,e.transform),(0,x.t)(t,i,P,4,l),(0,o.or)(P)&&(0,p.n)(t,t,4),a.push([F.r.TANGENT,new A.n(t,n,4,!0)])}if(null!=e.attributes.texCoord0){const t=(0,m.oe)(2*r),{typedBuffer:o,typedBufferStride:s}=e.attributes.texCoord0;(0,g.a)(t,o,2,s),a.push([F.r.UV0,new A.n(t,n,2,!0)])}const c=e.attributes.color;if(null!=c){const t=new Uint8Array(4*r);4===c.elementCount?c instanceof h.Eq?(0,x.b)(t,c,255):c instanceof h.XP?(0,y.a)(t,c):c instanceof h.Uz&&(0,x.b)(t,c,1/256):(t.fill(255),c instanceof h.xs?(0,p.f)(t,c.typedBuffer,255,4,c.typedBufferStride):e.attributes.color instanceof h.eI?(0,v.c)(t,c.typedBuffer,4,e.attributes.color.typedBufferStride):e.attributes.color instanceof h.nS&&(0,p.f)(t,c.typedBuffer,1/256,4,c.typedBufferStride)),a.push([F.r.COLOR,new A.n(t,n,4,!0)])}return{geometry:new O.V(t,a),vertexCount:r}}(e,null!==i&&void 0!==i?i:new N.$U({},n)),S=u.boundingInfo;null!=S&&0===M&&((0,f.iT)(R,S.bbMin),(0,f.iT)(R,S.bbMax)),null!=i&&(G.stageResources.geometries.push(u),G.numberOfVertices+=b)})),_||u.push(G)})),{engineResources:u,referenceBoundingBox:R}}(_,j,V,t,R.specifiedLodIndex);return{lods:q,referenceBoundingBox:z,isEsriSymbolResource:_.meta.isEsriSymbolResource,isWosr:!1}}const P=(0,i.vt)()},50791:(e,t,r)=>{r.d(t,{T:()=>n});const n=2.1}}]);
//# sourceMappingURL=7323.8b675872.chunk.js.map